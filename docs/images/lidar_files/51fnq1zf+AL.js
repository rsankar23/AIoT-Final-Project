'use strict';mix_d("P13NSCCards__p13n-desktop-carousel:p13n-desktop-carousel__XjWD8xU1","exports tslib @c/scoped-dom @p/A @c/metrics @c/aui-carousel @c/dom @c/remote-operations @p/a-carousel-framework @c/logger @c/aui-untrusted-ajax @c/browser-operations @c/aui-utils @c/tracking @c/error-handling @c/aui-feature-detect @c/aui-modal @c/scoped-metrics @p/jQuery".split(" "),function(va,n,wa,ab,z,bb,xa,ya,cb,db,eb,za,fb,Aa,gb,hb,ib,jb,kb){function I(a){return a&&"object"===typeof a&&"default"in a?a:{"default":a}}
var w=I(wa),v=I(ab),Q=I(z),lb=I(bb),S=I(xa),T=I(ya),Ba=I(cb),B=I(db),Z=I(eb),da=I(za),D=I(fb),C=I(gb),mb=I(hb),nb=I(ib),aa=I(jb),E=I(kb),Ca={},ia=function(a,b,c){void 0===b&&(b="");void 0===c&&(c=1);b=a+b;Ca.hasOwnProperty(b)||(Ca[b]=!0,z.count(a,(z.count(a)||0)+c))},ob=function(a){ia(v["default"].capabilities.mobile?"Card:EERU:SharedLib:mobile:render":"Card:EERU:SharedLib:desktop:render");var b=function(d,e){d={$event:{preventDefault:v["default"].$.noop,stopPropagation:v["default"].$.noop},$target:d.getContent().find('[data-a-tab-name="'+
e+'"]'),data:{name:"energyEfficiencyTabSet"}};v["default"].trigger("a:declarative:a-tabs:click",d)},c=function(d,e){var f=d&&d.$event,g=d&&d.data||{},h=g.activeTabName,k=g.modalHeight,p=g.name;f&&f.preventDefault&&f.preventDefault();f&&f.stopPropagation&&f.stopPropagation();f=e.get(p);f||(v["default"].on("a:popover:beforeShow:"+p,function(l){l.popover&&l.popover.getContent&&(l=l.popover.getContent(),l.find(".a-manually-loaded").parent().css("min-height",k),v["default"].loadDescendantImagesManually(l))}),
f=e.create(d.$target,g));f.show();b(f,h)};a.when("a-secondary-view").execute("RegisterEnergyEfficiencyEventMobile",function(d){v["default"].declarative("card-energy-efficiency-secondary-view","click",function(e){ia("Card:EERU:SharedLib:mobile:click",e&&e.data&&e.data.name||"");c(e,d)})});a.when("a-modal").execute("RegisterEnergyEfficiencyEventDesktop",function(d){v["default"].declarative("card-energy-efficiency-modal","click",function(e){ia("Card:EERU:SharedLib:desktop:click",e&&e.data&&e.data.name||
"");c(e,d)})})},pb=function(a){a.when("ready").execute("EEBadgeProductFicheResize",function(b){var c=v["default"].$;c(".energyEfficiencyContainer").each(function(d,e){d=c(e).find(".energyEfficiencyProductFicheLabel").first();e=c(e).find("svg").first();d.parent().outerHeight()>e.outerHeight()&&(d.removeClass("a-size-small"),d.addClass("a-size-micro"),d.parent().outerHeight()>e.outerHeight()&&d.parent().css("line-height","10px"))})})},qb={ctiList:["Website/Personalization/Report a Problem CX"],category:"Website",
type:"Personalization",item:"Report a Problem CX",folder:"9c9c97c9-6f69-4dba-a55d-26045c6a3068",group:"P13N Report a Problem CX"},rb=[{ctiList:["Website/Personalization/Similarities","Website/Detail Page/Similarities"],category:"Website",type:"Personalization",item:"Similarities",folder:"4d16d05d-9a17-4b36-b8fe-9ee159ff81de",group:"Similarities"}],vb=function(a){var b=w["default"].cardRoot.querySelector(".p13n-report-flag"),c=da["default"].setup();c.define("showFlag","mouseover",function(){b.classList.remove("p13n-report-flag-hide")});
c.define("hideFlag","mouseout",function(){b.classList.add("p13n-report-flag-hide")});c.attach("showFlag",a);c.attach("hideFlag",a);var d=w["default"].cardRoot.querySelector(".internal-flag-form"),e=d.querySelector(".internal-flag-env-data").dataset,f=d.querySelector(".internal-flag-title-text"),g=d.querySelector(".internal-flag-description").firstElementChild,h=d.querySelector(".internal-flag-alias"),k=d.querySelector(".internal-flag-response-message"),p=function(l){l.preventDefault();l=function(t){return!t||
!t.trim()};if(l(f.value)||l(g.value)||l(h.value))return ja(k,!1,"Something went wrong. One of the required fields was missing."),!1;l=w["default"].cardRoot.querySelectorAll(".a-dynamic-image");var r;if(r=w["default"].cardRoot.querySelector(".a-carousel-heading")){var q=sb(a,l.length);r="Internal user reported issue '"+f.value+"' with widget: "+r.innerText}else q=tb(a),r="Internal user reported issue '"+f.value+"'";l=ub(l,q,g.value,h.value,e);var m=qb;rb.forEach(function(t){t.ctiList.includes(e.cti)&&
(m=t)});Z["default"].post("https://p13ngoals.corp.amazon.com/sims",{accepts:"text/html, application/json",contentType:"application/json;charset=UTF-8"},{sim_params:{assigned_folder:m.folder,description:l,descriptionContentType:"text/amz-markdown-sim",extensions:{tt:{assignedGroup:m.group,category:m.category,impact:5,item:m.item,type:m.type}},tags:[{id:"internal-problem-generated"}],title:r}}).then(function(t){ja(k,!0,t)}).catch(function(t){ja(k,!1,t)});return!1};d.onsubmit=function(l){return p(l)};
c=w["default"].cardRoot.querySelector(".p13n-desktop-report-problem-flag-data");if(c.dataset.name)v["default"].on("a:popover:hide:"+c.dataset.name,function(){d.reset();k.innerText=""})},sb=function(a,b){if(!a.dataset.aCarouselOptions)return B["default"].log("Empty ASIN List in carouselElement.dataset.aCarouselOptions","ERROR"),[];a=JSON.parse(a.dataset.aCarouselOptions).ajax.id_list;var c=w["default"].cardRoot.querySelector(".a-carousel-firstvisibleitem");c=(Number(c.value)||1)-1;return a.map(function(d){return JSON.parse(d).id}).slice(c,
c+b)},tb=function(a){return(a=a.dataset.asinList)?a.split(","):[]},ub=function(a,b,c,d,e){for(var f="",g=0;g<a.length;g++){var h=a[g];f+=(h?"![]("+h.src+")":"IMAGE MISSING")+"\nASIN: "+(b[g]?b[g]:"ASIN MISSING")+"\n\n"}return"**This SIM-T ticket is created by the 'Report a Problem' internal tool. To know more, here's its wiki: https://w.amazon.com/bin/view/Personalization/CoreRecommendations/Projects/Canaries/Report-a-Problem-UX-on-P13NWidget/UserGuide/**\n\n**Alias:** ["+(d+"](https://phonetool.amazon.com/users/"+
d+")\n**Comment:** "+c+"\n\n**Widget Group ID:** "+e.widgetGroupId+"\n**Strategy ID:** "+e.strategyId+"\n**CTI:** "+e.cti+"\n**Facets:** ")+(e.facets+"\n**Content Reftag:** "+e.reftag+"\n"+(""!==e.baseAsin?"**Page ASIN:** "+e.baseAsin+"\n":"")+"\n**SessionID:** ")+(e.sessionId+"\n**MarketplaceID:** "+e.marketplaceId+"\n**Device Type:** "+e.deviceType+"\n\n**List of ASINs:**\n\n")+f},ja=function(a,b,c){b?(a.classList.remove("a-color-error"),c.responseBody&&"object"===typeof c.responseBody?c.responseBody.response&&
c.responseBody.response.id?a.innerHTML="Success, here's the <a href=\"https://t.corp.amazon.com/"+c.responseBody.response.id+'" target="_blank">SIM-T ticket</a> you created.':(B["default"].log("Fail to find the id of the SIM-T ticket created in the response body of response data.","ERROR"),a.innerText="Success, but we could not find the link to the SIM-T ticket."):(B["default"].log("The response body of response data is not an object.","ERROR"),a.innerText="Success, but we could not find the link to the SIM-T ticket.")):
(a.classList.add("a-color-error"),a.innerText="string"===typeof c?c:"Oops! Something went wrong. Please try again.")},wb={setupModal:function(a){return n.__awaiter(void 0,void 0,void 0,function(){var b;return n.__generator(this,function(c){b=w["default"].cardRoot.querySelector(".p13n-report-problem-modal-root");if(!b)return[2];vb(a);return[2]})})}},xb=T["default"].setup(["getLazyLoadDeliveryMessage"]),yb=function(a){return n.__awaiter(void 0,void 0,void 0,function(){var b,c,d;return n.__generator(this,
function(e){switch(e.label){case 0:b=a.querySelectorAll("[data-udm-asin]:not([data-requested=true])");if(!b.length)return[2,void 0];c=[];b.forEach(function(f){var g=f.dataset.udmAsin,h=f.dataset.udmMerchantId,k=f.dataset.udmBlockSize,p=f.dataset.udmLayoutSize,l="true"===f.dataset.udmBadgeWithoutProgramName;g&&h&&k&&(c.push({asin:g,merchantId:h,blockSize:k,layoutSize:p,badgeWithoutProgramName:l}),f.dataset.requested="true")});return c.length?[4,xb.getLazyLoadDeliveryMessage({lazyLoadDeliveryMessageViewModels:c})]:
[2,void 0];case 1:return d=e.sent(),[2,[].slice.call(d.querySelectorAll("[data-udm-asin]:not([data-requested=true])"))]}})})},zb=function(a){return n.__awaiter(void 0,void 0,void 0,function(){var b;return n.__generator(this,function(c){switch(c.label){case 0:return[4,yb(a)];case 1:b=c.sent();if(!b)return[2];b.map(function(d){var e=d.dataset.udmAsin,f=d.dataset.udmMerchantId;e&&f&&(e=a.querySelector("[data-udm-asin="+e+"][data-udm-merchant-id="+f+"]"))&&(e.outerHTML=d.innerHTML)});return[2]}})})},
Da=[],Ab=function(a){var b=Array.prototype.slice.call(a.querySelectorAll("[data-metrics]"));b.push(a);b.forEach(function(c){if(c&&c.dataset&&c.dataset.metrics&&(!c.id||!Da.includes(c.id))){var d=JSON.parse(c.dataset.metrics),e;for(e in d)d.hasOwnProperty(e)&&z.count(e,d[e]);c.removeAttribute("data-metrics");c.id&&Da.push(c.id)}})},Ea=/(?=[ \-\/])|(?=[\u3105-\u312F])|(?=[\u31A0-\u31BA])|(?=[\u4E00-\u9FD5])|(?=[\u3400-\u4DB5])|(?=[\uF900-\uFAFF])|(?=[\u3040-\u309F])|(?=[\u30A0-\u30FF])|(?=[\u3190-\u319F])/,
Fa=/[^\/\-\[\]():\s]/,Bb=function(a){var b=v["default"].$("<div>")[0];b.classList.add("p13n-sc-offscreen-truncate");var c=parseInt(a.getAttribute("data-rows")||"2",10),d=function(){var g=a.innerHTML;a.innerHTML="&hellip;";var h=a.clientHeight;a.innerHTML=g;return h}();if(c){if(d){var e=function(g){b.innerHTML=g;return Math.round(b.clientHeight/d)<=c},f=function(g,h){g=g.split(h);var k=Math.floor(a.clientWidth/12),p=function(r){b.classList.add("p13n-sc-offscreen-truncate");b.style.overflow="hidden";
b.textContent=r;a.appendChild(b);r=a.clientWidth>=a.scrollWidth;a.removeChild(b);return r},l=function(r){var q=r.length-k;r.trim().length>k&&!p(r)&&Array.prototype.slice.call(r).map(function(m,t){return t>k&&t<=q&&Fa.test(m)?"&shy;"+m:m});return r};return g.map(function(r){return l(r)}).join("")};return{truncate:function(){var g=a.innerHTML.trim(),h=a.textContent||"";g=f(g,Ea);a.appendChild(b);if(e(g))a.removeChild(b),a.innerHTML=g;else{var k=g.split(Ea);for(var p=1,l=k.length,r,q,m=0;p!==l;)if(r=
Math.floor((l+p)/2),q=k.slice(0,r).join("")+"&hellip;",e(q)){if(1>=l-r){for(m=r;0<m&&!Fa.test(k[m-1]);)m--;break}p=r}else l=r;k=0===m?void 0:k.slice(0,m).join("")+"&hellip;";k?(a.innerHTML=k,a.setAttribute("title",h),a.setAttribute("aria-label",h)):(B["default"].log("Unable to successfully truncate line "+g,"ERROR"),a.removeChild(b))}}}}B["default"].log("Truncation element does not have a line height or it is zero","ERROR")}else B["default"].log("Truncation element missing necessary line number data",
"ERROR")},Cb=function(a){var b=Array.prototype.slice.call(a.getElementsByClassName("p13n-sc-truncate"));a=a.getElementsByClassName("p13n-sc-truncate-fallback");(window.CSS&&CSS.supports&&CSS.supports("-webkit-line-clamp","1")?b:b.concat(Array.prototype.slice.call(a))).filter(function(c){return!!c.offsetParent}).map(function(c){var d=Bb(c);d&&(d.truncate(),c.classList.add("p13n-sc-truncated"),c.classList.remove("p13n-sc-truncate"),c.classList.remove("p13n-sc-truncate-fallback"),c.className=c.className.replace(/p13n-sc-line-clamp-\d/g,
""))})},Db=function(a){a.querySelectorAll(".a-carousel-viewport").forEach(function(b){b=b.querySelectorAll(".a-carousel-card");for(var c=null,d=0;d<b.length;d++){var e=b[d].getAttribute("aria-roledescription");if(null!==e&&""!==e){c=e;break}}c=c||"slide";b.forEach(function(f){f.getAttribute("aria-roledescription")!==c&&f.setAttribute("aria-roledescription",c)})})},Eb=function(a){a=Ga(a);a.matches("form")&&!a.classList.contains("add-to-cart-disabled-form")&&(a.addEventListener("submit",function(b){b.preventDefault()}),
a.classList.add("add-to-cart-disabled-form"))},Ga=function(a){a=a.querySelector(".add-to-cart-data");null==a&&C["default"].error("Missing add to cart data element in target element","add-to-cart.client.data-handler","getDataElement");return a},Fb=function(){var a;try{P.now("A").execute(function(b){var c;if(b){var d=b.state("mbs-sp-csrf-state"),e=null===(c=b.$(null===d||void 0===d?void 0:d.mbsSpCSRFToken))||void 0===c?void 0:c.filter("input");(null===e||void 0===e?0:e.length)?a=b.$(d.mbsSpCSRFToken).filter("input").val():
(B["default"].log("Invalid page state!"),Q["default"].count("ATCLibInvalidPageState",1))}else B["default"].log("Module not loaded!"),Q["default"].count("ATCLibBrowserModuleNotFound",1)})}catch(b){B["default"].log("Error occured while fetch CSRF token from page state: "+b),Q["default"].count("ATCLibSPTokenParseFailure",1)}return a},Ha=function(a,b){var c=ka(a);D["default"].delay(function(){c.classList.remove("a-button-disabled");c.classList.remove("a-button-focus")},Gb(b))},Gb=function(a){var b=Date.now();
return 2E3<b-a?0:2E3-(b-a)},ka=function(a){(a=a.querySelector(".add-to-cart-button"))||C["default"].error('Missing Add to Cart button!", "add-to-cart.dom-handler',"getAddToCartButton");return a},U=function(a,b,c){Array.isArray(a)?a.forEach(function(d){z.count(""+d+":"+b,c)}):z.count(""+a+":"+b,c)},Ia=function(a,b,c){b=Date.now()-b;U(a,"AddToCart:ClientLatency",b);U(a,"AddToCart:"+(c?"NeoAddToCart":"AddToCartApi")+":ClientLatency",b)},J=function(a,b,c){U(b,"AddToCart:Availability:ALL",0);U(b,"AddToCart:Availability:Failure:"+
a,1);c=c?"NeoAddToCart":"AddToCartApi";U(b,"AddToCart:"+c+":Availability:ALL",0);U(b,"AddToCart:"+c+":Availability:Failure:"+a,1)},Ja=function(a,b){U(a,"AddToCart:Availability:ALL",1);U(a,"AddToCart:"+(b?"NeoAddToCart":"AddToCartApi")+":Availability:ALL",1)},Ka=function(a){v["default"].trigger("add-to-cart-library:update-cart-count:trigger",a)},Hb={boolean:Boolean,number:Number,string:String},Ib=function(a,b){void 0===b&&(b="");var c={};Object.keys(a).forEach(function(d){var e=d.split(b?b:/\]\[|\[|\]/).filter(function(h){return h});
if(!(1>e.length)&&e.includes("additionalParameters")){""===b&&(e=e.slice(e.indexOf("additionalParameters")+1));var f=e.pop(),g=n.__read(a[d].split(","),2);d=g[1];g=Hb[g[0]];e.reduce(function(h,k){return h[k]=h[k]||{}},c)[f]=g(d)}});return Object.keys(c).length?c:void 0},Jb=function(a,b){return n.__awaiter(void 0,void 0,void 0,function(){var c,d,e,f;return n.__generator(this,function(g){switch(g.label){case 0:return c={Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"},d=
w["default"].cardRoot.getElementsByClassName("shoppingPortalCSRFToken")[0].getElementsByTagName("input")[0],c["anti-csrftoken-a2z"]=d&&d.value?d.value:a["anti-csrftoken-a2z"],[4,fetch(b,{method:"post",headers:c,body:new URLSearchParams(a)})];case 1:return e=g.sent(),e.ok?[4,e.json()]:[3,3];case 2:return[2,g.sent()];case 3:return[4,e.text()];case 4:throw f=g.sent(),Error(f);}})})},Kb=function(a,b){return n.__awaiter(void 0,void 0,void 0,function(){var c,d,e,f,g;return n.__generator(this,function(h){c=
ba(a.inputKeyValues,"clientName");d=ba(a.inputKeyValues,"customizers");e=ba(a.inputKeyValues,"anti-csrftoken-a2z");h=JSON;for(var k=h.stringify,p=a.inputKeyValues,l=a.numItems,r=[],q=0;q<l;q++){var m=ba(p,"items["+q+".base][asin]"),t=Ib(p),u=t?void 0:ba(p,"items["+q+".base][offerListingId]"),x=ba(p,"items["+q+".base][quantity]"),y=Number(x);if(isNaN(y))throw Error("Quantity passed "+x+" is not a number!");r.push({asin:m,offerListingId:u,quantity:y,additionalParameters:t})}f='{"items":'+k.call(h,r)+
"}";g={clientName:c,customizers:d,"anti-csrftoken-a2z":e,payload:f};return[2,Jb(g,b)]})})},ba=function(a,b){var c=a[b];if(!c)throw Error("Missing "+b+" in add to cart form values "+JSON.stringify(a)+"!");return c},la=function(a,b,c,d){if(!b||!b[a])return C["default"].error("Missing Html Container Selector for "+a+" in the experienceContainerSelector","post-neo-add-to-cart-handlers","experienceHandler");if(c=c.querySelector("."+b[a]))D["default"].show(c),d&&(c.innerHTML=d);else return C["default"].error("Missing "+
b[a]+" Container in the faceoutContainerSection","post-neo-add-to-cart-handlers","experienceHandler")},ma=function(a,b){for(var c in b){var d;(d=a.querySelector("."+b[c]))&&D["default"].hide(d)}},La={SCXDiscovery_SpeedCardsLibrary:{MOBILE:{weblab:"DEX_SSD_AUI_ATC_BYG_M_1210471",treatment:"C"},DESKTOP:{weblab:"DEX_SSD_AUI_ATC_BYG_D_1210469",treatment:"C"}}},Mb=function(a){var b=a.clientName;a=a["anti-csrftoken-a2z"];if(b&&a){var c=mb["default"].isSupported("mobile")?"MOBILE":"DESKTOP";La[b]&&(c=La[b][c],
Q["default"].rid&&c&&c.weblab&&c.treatment&&(b={ref_:"atc_clib",weblabId:c.weblab,weblabTreatment:c.treatment,requestID:Q["default"].rid,clientName:b},a={accepts:"text/html, application/json",additionalHeaders:{"anti-csrftoken-a2z":a},timeout:2E3},Z["default"].post(Lb("/cart/add-to-cart/weblab",b),a,b).then(function(){Q["default"].count("ATCLibExperimentTriggerSuccess",1)}).catch(function(){Q["default"].count("ATCLibExperimentTriggerFailure",1)})))}},Lb=function(a,b){return(b=Object.entries(b).filter(function(c){c=
n.__read(c,2);c[0];return null!=c[1]}).map(function(c){c=n.__read(c,2);var d=c[1];return encodeURIComponent(c[0])+"="+encodeURIComponent(d)}).join("&"))?a+"?"+b:a},Nb=function(a,b){try{var c=a.closest(".mobile-promotion-nudges-card-container"),d=b.ProgressSection,e=b.DefaultProgressSection;P.when("cart-progress-module").execute(function(f){return n.__awaiter(this,void 0,void 0,function(){return n.__generator(this,function(g){f.callUpdateCartProgress(d,e,a,c);return[2]})})})}catch(f){B["default"].log("Error occured while updating Cart Progress : "+
f),Q["default"].count("ATCLibUpdateCartProgressFailureCount",1)}},Ob=T["default"].setup(["addToCart"]),Qb=function(a){var b=da["default"].setup().define;b(a.featureId?"AddToCart:"+a.featureId:"AddToCart","click",function(c){var d;return Pb(c,null!==(d=a.useNeoAddToCart)&&void 0!==d?d:!1,a.postAddToCartHandler,a.metricsPrefixes,a.experienceContainerSelectors,a.faceoutContainerSelector)})},na={success:!1},Pb=function(a,b,c,d,e,f){return n.__awaiter(void 0,void 0,void 0,function(){var g,h,k,p,l,r,q,
m,t,u,x,y,F,R,N,G,O;return n.__generator(this,function(A){switch(A.label){case 0:if(!b&&!c)return[2,C["default"].error("Missing Post Add To Cart Handlers!","add-to-cart.client","handleAddToCartBrowserOperation")];g=null===(R=a.currentTarget)||void 0===R?void 0:R.closest(".add-to-cart-section");if(!g)return J("MissingHtml",d,b),[2,C["default"].error("Missing AddToCart section near AddToCart button!","add-to-cart.client","handleAddToCartBrowserOperation")];Eb(g);if(ka(g).classList.contains("a-button-disabled"))return[2];
ka(g).classList.add("a-button-disabled");A={};for(var L=Ga(g).getElementsByTagName("input"),M=0;M<L.length;M++){var Ma=L[M];A[Ma.name]=Ma.value}(L=Fb())&&(A["anti-csrftoken-a2z"]=L);h=A;A=a.currentTarget;(null===A||void 0===A?0:A.dataset)||C["default"].error("Event target is missing required data","add-to-cart.client","getTargetElementDataFromMixEvent");k=null===A||void 0===A?void 0:A.dataset;p=k.reftag;l=k.asins;r=k.url;if(!l)return J("MissingAsins",d,b),[2,C["default"].error("Missing asins in target element data",
"add-to-cart.client","handleAddToCartBrowserOperation")];q=JSON.parse(l);if(b){if(f){if(m=null===(N=a.currentTarget)||void 0===N?void 0:N.closest("."+f),!m)return J("MissingFaceoutContainerSection",d,b),[2,C["default"].error("Missing FaceoutContainer Section near AddToCart button!","add-to-cart.client","handleAddToCartBrowserOperation")]}else return J("MissingFaceoutContainerSelector",d,b),[2,C["default"].error("Missing FaceoutContainerSelector","add-to-cart.client","handleAddToCartBrowserOperation")];
if(!e)return J("MissingExperienceContainerSelectors",d,b),[2,C["default"].error("Missing experienceContainerSelectors","add-to-cart.client","handleAddToCartBrowserOperation")];if(e.ErrorMessage){if(x=m.querySelector("."+e.ErrorMessage),!x)return J("MissingErrorMessageContainerSection",d,b),[2,C["default"].error("Missing ErrorMessageContainer Section in FaceoutContainer Section","add-to-cart.client","handleAddToCartBrowserOperation")]}else return J("MissingErrorMessageSelector",d,b),[2,C["default"].error("Missing ErrorMessage Container in experienceContainerSelectors",
"add-to-cart.client","handleAddToCartBrowserOperation")];if(!r)return J("MissingEndpoint",d,b),[2,C["default"].error("Missing NeoAddToCart Endpoint in target element data","add-to-cart.client","handleAddToCartBrowserOperation")];t=g.querySelector(".inline-error-message");if(!t)return J("MissingInlineErrorMessageContainerSection",d,b),[2,C["default"].error("Missing inlineErrorMessage Container Section in addToCartSection","add-to-cart.client","handleAddToCartBrowserOperation")];u=g.querySelector(".inline-success-message");
if(!u)return J("MissingInlineSuccessMessageContainerSection",d,b),[2,C["default"].error("Missing inlineSuccessMessage Container Section in addToCartSection","add-to-cart.client","handleAddToCartBrowserOperation")]}if(!p)return b||(null===c||void 0===c?void 0:c.errorHandler(na,q)),J("MissingReftag",d,b),[2,C["default"].error("Missing reftag in target element data","add-to-cart.client","handleAddToCartBrowserOperation")];y=k.numitems;if(!y)return b||(null===c||void 0===c?void 0:c.errorHandler(na,q)),
J("MissingNumItems",d,b),[2,C["default"].error("Missing numItems in target element data","add-to-cart.client","handleAddToCartBrowserOperation")];F=Date.now();Rb(g);return b?[4,Sb(h,y,r,d,e,m,null!==(G=null===t||void 0===t?void 0:t.innerHTML)&&void 0!==G?G:"",null!==(O=null===u||void 0===u?void 0:u.innerHTML)&&void 0!==O?O:"",g,F)]:[3,2];case 1:return A.sent(),[3,4];case 2:return[4,Tb(h,p,y,d,c,q,g,F)];case 3:A.sent(),A.label=4;case 4:return[2]}})})},Rb=function(a){(a=a.querySelector('input[name="spClickUrlATC"]'))&&
a.value&&Z["default"].get(a.value,{accepts:"text/html, application/json",timeout:2E3}).then(function(){Q["default"].count("ATCLibSponsoredProductsClicksATCUrlSuccess",1)}).catch(function(){Q["default"].count("ATCLibSponsoredProductsClicksATCUrlFailure",1)})},Ub=function(a,b,c){return n.__awaiter(void 0,void 0,void 0,function(){var d,e;return n.__generator(this,function(f){d={inputKeyValues:a,numItems:c};e=Aa.addTracking(Ob.addToCart,{ref_:b});return[2,e(d)]})})},Sb=function(a,b,c,d,e,f,g,h,k,p){return n.__awaiter(void 0,
void 0,void 0,function(){var l,r,q;return n.__generator(this,function(m){switch(m.label){case 0:l=Number(b),m.label=1;case 1:return m.trys.push([1,3,4,5]),[4,Kb({inputKeyValues:a,numItems:l},null!==c&&void 0!==c?c:"")];case 2:r=m.sent();r.successful?(Ja(d,!0),r.count&&Ka(r.count),v["default"].trigger("add-to-cart-library:add-to-cart:success"),e&&e.ProgressSection&&e.DefaultProgressSection&&Nb(f,e)):J("FailureResponse",d,!0);m=r.experience;var t=r.successful;ma(f,e);try{for(var u in m)la(u,e,f,m[u])}catch(x){u=
t?h:g,ma(f,e),la("ErrorMessage",e,f,u)}return[3,5];case 3:return q=m.sent(),v["default"].trigger("add-to-cart-library:add-to-cart:error"),ma(f,e),la("ErrorMessage",e,f,g),J("Error",d,!0),C["default"].error("callNeoAddToCart Error: "+q.message,"add-to-cart.client","handleAddToCartBrowserOperation"),[3,5];case 4:return Ia(d,p,!0),Ha(k,p),[7];case 5:return[2]}})})},Tb=function(a,b,c,d,e,f,g,h){return n.__awaiter(void 0,void 0,void 0,function(){var k,p;return n.__generator(this,function(l){switch(l.label){case 0:return l.trys.push([0,
2,3,4]),[4,Ub(a,b,Number(c))];case 1:return k=l.sent(),k.success?(Ja(d,!1),k.count&&Ka(k.count),null===e||void 0===e?void 0:e.successHandler(k,f)):(J("FailureResponse",d,!1),null===e||void 0===e?void 0:e.errorHandler(k,f)),Mb(a),[3,4];case 2:return p=l.sent(),J("Error",d,!1),null===e||void 0===e?void 0:e.errorHandler(na,f),C["default"].error("callAddToCart Error: "+p.message,"add-to-cart.client","handleAddToCartBrowserOperation"),[3,4];case 3:return Ia(d,h,!1),Ha(g,h),[7];case 4:return[2]}})})},H=
function(a){return a instanceof HTMLElement},Vb=function(a){if(a)try{return parseInt(a,10)}catch(b){}},Na=function(a,b,c,d){v["default"].trigger("p13n:sc:cartupdated:"+a,b);d&&v["default"].trigger("add-to-cart-library:update-cart-count:trigger",c)},W;(function(a){a.removeItemFromCart="removeItemFromCart";a.addItemToCart="addItemToCart"})(W||(W={}));var Wb=ya.setup(["modifyItemsInCart"]),ea=za.setup(),Yb=function(a,b){if("true"!==a.dataset.initializedCartSubscriber)v["default"].on("p13n:sc:cartupdated:"+
b,function(c){Xb(a,c);a.dataset.initializedCartSubscriber="true"})},oa=function(a,b){a?b.classList.add("a-button-disabled"):b.classList.remove("a-button-disabled")},ha=function(a,b,c){var d=a.querySelector(".asin-id-"+b+" .p13n-sc-atc-failure"),e=null===d||void 0===d?void 0:d.querySelector(".p13n-sc-atc-failure .a-declarative"),f=a.querySelector(".asin-id-"+b+" .p13n-sc-default-atc-error-container"),g=function(p){var l;return f&&(null===(l=null===f||void 0===f?void 0:f.querySelector(p))||void 0===
l?void 0:l.textContent)};b=null===d||void 0===d?void 0:d.querySelector(".p13n-sc-popover");c=c&&c.failureMessage;var h=g(".p13n-sc-default-atc-error"),k=g(".p13n-sc-default-atc-product-error");g=g(".p13n-sc-default-atc-error-url");g=h&&g&&k?h.replace("${dpUrl}","<a href="+g+">"+k+"</a>"):void 0;H(e)&&H(b)&&(c?e.dataset.aPopover='{"inlineContent":"'+c+'"}':g&&(e.dataset.aPopover='{"inlineContent":"'+g+'"}'),D["default"].show(b),b.click());H(d)&&D["default"].show(d);Zb((null===a||void 0===a?0:a.classList.contains("p13n-sc-shoveler"))?
a:null===a||void 0===a?void 0:a.querySelector(".p13n-sc-shoveler"))},Zb=function(a){H(a)&&Ba["default"].getCarousel(a).init()},pa=function(a,b){a=a.querySelector(".asin-id-"+b+" .p13n-sc-atc-failure");H(a)&&D["default"].hide(a);a=null===a||void 0===a?void 0:a.querySelector(".p13n-sc-popover");H(a)&&D["default"].hide(a)},Oa=function(a){return parseInt(H(a)&&a.getAttribute("data-maxorderquantity")||"999",10)},Xb=function(a,b){var c=a.querySelector(".p13n-sc-atc-stepper-section"),d=a.querySelector(".add-to-cart-section"),
e=null===c||void 0===c?void 0:c.querySelector(".atc-stepper-quantity-display"),f=null===c||void 0===c?void 0:c.querySelector(".atc-stepper-trash-button"),g=null===c||void 0===c?void 0:c.querySelector(".atc-stepper-remove-button"),h=null===c||void 0===c?void 0:c.querySelector(".atc-stepper-add-button"),k=function(l){l?(D["default"].show(c),D["default"].hide(d)):(D["default"].hide(c),D["default"].show(d))};a=function(l){H(f)&&H(g)&&(l?(D["default"].show(f),D["default"].hide(g)):(D["default"].hide(f),
D["default"].show(g)))};var p=function(l){H(h)&&(l?h.classList.remove("p13n-atc-add-disabled"):h.classList.add("p13n-atc-add-disabled"))};0<b?(k(!0),H(e)&&(e.textContent=b.toString()),H(c)&&c.setAttribute("data-currentquantity",b.toString()),e=Oa(c),a(1===b),p(b<e)):k(!1)},$b=function(a,b,c){b={items:[{id:c,quantity:b}]};return Aa.addTracking(Wb.modifyItemsInCart,{ref_:a})(b)},Pa=function(a,b){return n.__awaiter(void 0,void 0,void 0,function(){var c,d,e,f,g,h,k,p,l,r,q;return n.__generator(this,function(m){switch(m.label){case 0:b.stopBubble();
c=null===b||void 0===b?void 0:b.currentTarget;if(!c)return[2];d=c.parentElement;if(null===d||void 0===d||!d.classList.contains("p13n-sc-atc-stepper-section"))throw Error("DOM formatting incompatible with stepper");if(d.classList.contains("a-button-disabled"))return[2];e=c.dataset.id;f=d.dataset.modifyId;g=d.dataset.reftag;h=Vb(d.dataset.currentquantity);k=Oa(d);if(!(e&&e.length&&h&&g&&f))throw Error("DOM formatting incompatible with stepper");p=h+a;if(p>k&&0<a)return[2];l=function(){d.parentElement&&
ha(d.parentElement,e)};r=function(){d.parentElement&&pa(d.parentElement,e)};oa(!0,d);m.label=1;case 1:return m.trys.push([1,3,,4]),[4,$b(g,p,f).catch(function(){})];case 2:return q=m.sent(),oa(!1,d),q&&q.success||l(),q&&q.success&&void 0!==q.count?(r(),Na(e,p,q.count,!0)):q&&q.success&&void 0===q.count&&(z.count("p13n:sc:lib:undefinedcartquantity",(z.count("p13n:sc:lib:undefinedcartquantity")||0)+1),r()),[3,4];case 3:return m.sent(),l(),oa(!1,d),[3,4];case 4:return[2]}})})},Qa=function(a,b,c,d){Qb({postAddToCartHandler:{successHandler:function(e,
f){c(f[0],a,e);pa(a,f[0])},errorHandler:function(e,f){d(f[0],a,e)}},metricsPrefixes:b})},ac=function(a){a&&Z["default"].get(a,{accepts:"text/html, application/json",timeout:2E3}).then(function(){Q["default"].count("P13NSCCardsSponsoredProductsClicksATCUrlSuccess",1)}).catch(function(){Q["default"].count("P13NSCCardsSponsoredProductsClicksATCUrlFailure",1)})},qa=function(a){return 0===Math.floor(a/10)?"0"+a.toString():a.toString()},bc=function(a){var b=Date.now();var c=a.dayscountdowntoendtemplate,
d=a.expiredstring,e=a.hourscountdowntoendtemplate,f=a.minutescountdowntoendtemplate;a=parseInt(a.endtime,10);if(b<=a){d=null;var g=a-b;a=Math.floor(g/864E5);var h=Math.floor(g/36E5);b=Math.floor(g/6E4%60);g=Math.floor(g/1E3%60);if(1<a&&c&&(d=c,null!==d))return c=d.replace("${daysCount}",a.toString());f&&(d=0===h?f:e);return null!==d?(c=d.replace("_hours_",qa(h)),c=c.replace("_minutes_",qa(b)),c=c.replace("_seconds_",qa(g))):""}return d},cc=function(a){if(null!==a&&a.dataset.endtime){a.dataset.callbackAttached=
"true";var b=setInterval(function(){a.innerText===a.dataset.expiredstring&&clearInterval(b);var c=bc({dayscountdowntoendtemplate:a.dataset.dayscountdowntoendtemplate||"",endtime:a.dataset.endtime||"",expiredstring:a.dataset.expiredstring||"",hourscountdowntoendtemplate:a.dataset.hourscountdowntoendtemplate||"",minutescountdowntoendtemplate:a.dataset.minutescountdowntoendtemplate||""});a.innerText=c},1E3)}},ca=function(a,b){return a.querySelector("[class*="+b+"]")},dc=function(a,b,c){a=JSON.parse(a);
a.adCreativeMetaData=b.adCreativeMetaData;a.feedbackFormContainerId=c;return encodeURI(JSON.stringify(a))},ec=function(a,b,c){return n.__awaiter(void 0,void 0,void 0,function(){var d,e,f,g,h,k,p;return n.__generator(this,function(l){d="adFeedbackModal_"+a;l=(null===(p=ca(b,"ad-feedback-modal-container"))||void 0===p?void 0:p.className)||"";e="."+b.className+" ."+l.replace(" ",".");g=(f=c().adCreativeMetaData.adCreativeDetails)?f.length:0;h={a11yOpenMessage:"",width:Math.max(560,125*g+130)};try{return k=
nb["default"].create(d,e,h),[2,k]}catch(r){throw z.count("adfeedback:cards:clientDesktop:modalCreation:failure",1),Error("Modal Creation Failed : "+r);}})})},hc=function(a,b,c,d,e,f,g){var h="rtl"===document.getElementsByTagName("html")[0].dir?"ad-feedback-loading-spinnner-rtl":"ad-feedback-loading-spinnner";var k=ca(S["default"].cardRoot,h);a.on("beforeShow",function(){return n.__awaiter(void 0,void 0,void 0,function(){var p,l;return n.__generator(this,function(r){switch(r.label){case 0:return p=
fc(a,b,c),[4,a.render(function(q){var m="250px",t=c().adCreativeMetaData.adCreativeDetails;t&&2>t.length&&(m="150px");k.style.marginTop=m;q.innerHTML="";m=q.appendChild;t=document.getElementsByTagName("html")[0].dir;var u=S["default"].createElement("div"),x=S["default"].createElement("div");u.innerHTML=e;"rtl"===t?(u.setAttribute("style",'box-sizing: border-box; color: rgb(15, 17, 17); font-family: "Amazon Ember", Arial, sans-serif; font-size: 16px; font-weight: 700; line-height: 24px; margin-bottom: 0px; margin-left: 28px; margin-right: 0px; margin-top: 0px; min-height: 56px; padding-bottom: 16px; padding-left: 0px; padding-right: 25px; padding-top: 16px; text-align: right; text-rendering: optimizelegibility; visibility: visible;'),
x.setAttribute("style",'background-attachment: scroll; background-clip: border-box; background-color: rgb(240, 242, 242); background-image: linear-gradient(to left, #EFEFEF 66.72%, #FFFFFF); background-origin: padding-box; background-position: 0% 0%; background-position-x: 0%; background-position-y: 0%; background-repeat: repeat; background-size: auto; border-bottom-color: rgb(213, 217, 217); border-bottom-left-radius: 0px; border-bottom-right-radius: 0px; border-top-left-radius: 8px; border-top-right-radius: 8px; box-sizing: border-box; color: rgb(15, 17, 17); display: block; font-family: "Amazon Ember", Arial, sans-serif; font-size: 14px; line-height: 20px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px; padding-bottom: 0px; padding-left: 24px; padding-right: 24px; padding-top: 0px; position: relative; text-align: right; visibility: visible; z-index: 10;')):
(u.setAttribute("style",'box-sizing: border-box; color: rgb(15, 17, 17); font-family: "Amazon Ember", Arial, sans-serif; font-size: 16px; font-weight: 700; line-height: 24px; margin-bottom: 0px; margin-left: 0px; margin-right: 28px; margin-top: 0px; min-height: 56px; padding-bottom: 16px; padding-left: 25px; padding-right: 0px; padding-top: 16px; text-align: left; text-rendering: optimizelegibility; visibility: visible;'),x.setAttribute("style",'background-attachment: scroll; background-clip: border-box; background-color: rgb(240, 242, 242); background-image: linear-gradient(to right, #EFEFEF 66.72%, #FFFFFF); background-origin: padding-box; background-position: 0% 0%; background-position-x: 0%; background-position-y: 0%; background-repeat: repeat; background-size: auto; border-bottom-color: rgb(213, 217, 217); border-bottom-left-radius: 0px; border-bottom-right-radius: 0px; border-top-left-radius: 8px; border-top-right-radius: 8px; box-sizing: border-box; color: rgb(15, 17, 17); display: block; font-family: "Amazon Ember", Arial, sans-serif; font-size: 14px; line-height: 20px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px; padding-bottom: 0px; padding-left: 24px; padding-right: 24px; padding-top: 0px; position: relative; text-align: left; visibility: visible; z-index: 10;'));
x.appendChild(u);m.call(q,x);m=document.getElementsByTagName("html")[0].dir;t=S["default"].createElement("div");"rtl"===m?t.setAttribute("style","padding-bottom: 16px; padding-right: 50px ; padding-top: 16px; justify-content: center; align-items: center;"):t.setAttribute("style","padding-bottom: 16px; padding-left: 50px ; padding-top: 16px; justify-content: center; align-items: center;");gc(k,t,d,p,f);q.appendChild(t)})];case 1:return r.sent(),(l=document.querySelector(".a-button-close"))&&l.setAttribute("aria-label",
g),[2]}})})})},fc=function(a,b,c){c=c();var d=c.adCreativeMetaData.adCreativeDetails;null===d||void 0===d?void 0:d.sort(function(e,f){return e.adCreativeIndex<f.adCreativeIndex?-1:1});return dc(b,c,a.id)},gc=function(a,b,c,d,e){b.appendChild(a);"function"==typeof z.uet&&z.uet("bb","adfeedback:cards:clientDesktop:fetchFormContent:time",{wb:1});Z["default"].post("/af/multi-creative/feedback-form",{accepts:"application/json",contentType:"application/json",additionalHeaders:{"Accept-Language":""===c?
"en-US":c}},{pl:d,deviceType:"desktop"}).then(function(f){return n.__awaiter(void 0,void 0,void 0,function(){var g,h,k;return n.__generator(this,function(p){"function"==typeof z.uet&&z.uet("be","adfeedback:cards:clientDesktop:fetchFormContent:time",{wb:1});z.count("adfeedback:cards:clientDesktop:fetchFormContent:success",1);g=S["default"].createElement("div");g.innerHTML=String(f.responseBody);for(h=0;h<g.children.length;++h)k=g.children[h],"SCRIPT"===k.tagName?ra("script",k,b):"LINK"===k.tagName?
ra("link",k,b):ra("div",k,b);b.removeChild(a);return[2]})})}).catch(function(){"function"==typeof z.uet&&z.uet("be","adfeedback:cards:clientDesktop:fetchFormContent:time",{wb:1});z.count("adfeedback:cards:clientDesktop:fetchFormContent:failure",1);b.innerHTML=e});"function"==typeof z.uex&&z.uex("ld","adfeedback:cards:clientDesktop:fetchFormContent:time",{wb:1})},ra=function(a,b,c){var d=S["default"].createElement(a);d.innerHTML=b.innerHTML;b.getAttributeNames().forEach(function(e){d.setAttribute(e,
b.getAttribute(e)||"")});c.appendChild(d)},Ra={},ic=function(a,b){return n.__awaiter(void 0,void 0,void 0,function(){var c,d,e,f,g,h,k,p,l;return n.__generator(this,function(r){c=ca(a,"ad-feedback-primary-link");d=b().adFeedbackLabelId;e=da["default"].setup();f="open-modal"+d;g=b().adCreativeMetaData.adCreativeDetails;h=a.dataset;k=h.isDsaEnabled;p=h.weblabTreatment;l=String(k);"undefined"===l&&(l=g&&0<g.length?g[0].selectionSignals?"true":"false":"false");"true"===l&&"T1"!==p&&(l="false");e.attach(f,
c);e.define(f,"click",function(){return n.__awaiter(void 0,void 0,void 0,function(){var q;return n.__generator(this,function(m){switch(m.label){case 0:return(q=Ra[d])?[3,2]:[4,ec(d,a,b)];case 1:q=m.sent();var t=a.dataset,u=t.formHeaderText,x=t.dsaFormHeaderText;hc(q,t.adFeedbackPayload,b,t.currentLocale,"true"===l?x:u,t.formLoadErrorText,t.closeButtonAriaText);Ra[d]=q;m.label=2;case 2:return q.show(),[2]}})})});try{c.addEventListener("keydown",function(q){if(" "===q.key||"Enter"===q.key)q.preventDefault(),
c.click()})}catch(q){console.log("Couldnt add keydown event listner")}return[2]})})},jc=function(a,b){var c=da["default"].setup(),d="mouse-enter"+b;b="mouse-leave"+b;var e=ca(a,"ad-feedback-primary-link"),f=ca(a,"ad-feedback-text-desktop"),g=ca(a,"ad-feedback-sprite");c.attach(d,e);c.define(d,"mouseenter",function(){g.style.backgroundPosition="0px -12px";f.style.color="#111111"});c.attach(b,e);c.define(b,"mouseleave",function(){g.style.backgroundPosition="0px 0px";f.style.color="#555"})},sa=function(a){return n.__awaiter(void 0,
void 0,void 0,function(){var b,c,d,e;return n.__generator(this,function(f){switch(f.label){case 0:return f.trys.push([0,3,,4]),b=a(),c=w["default"].cardRoot.getElementsByClassName("adFeedbackMainComponent_"+b.adFeedbackLabelId)[0],d=c.dataset.isSponsoredLabelActive,"false"===(d||"false").toLowerCase()?[2]:[4,jc(c,b.adFeedbackLabelId)];case 1:return f.sent(),[4,ic(c,a)];case 2:return f.sent(),[3,4];case 3:throw e=f.sent(),z.count("adfeedback:cards:clientDesktop:enableAdFeedback:failure",1),Error("Failed to call enableAdFeedback for desktop client : "+
e);case 4:return[2]}})})},kc=function(a){a=S["default"].cardRoot.getElementsByClassName(a);return Array.prototype.slice.call(a)},mc=function(a,b){kc("p13n-sc-unified-ad-label").forEach(function(c){c={adFeedbackLabelId:c.dataset.adFeedbackLabelId||"",adFeedbackAsin:c.dataset.adFeedbackAsin||"",adId:c.dataset.adId||"",campaignId:c.dataset.campaignId||"",advertiserId:c.dataset.advertiserId||"",marketplaceId:c.dataset.marketplaceId||"",isLocationUsed:c.dataset.locationUsed||"",isInterestBasedAdsOptOut:c.dataset.interestBased||
"",title:c.dataset.asinTitle||"",price:c.dataset.asinPrice||"",currencyCode:c.dataset.currencyCode||""};c.adFeedbackLabelId&&c.adFeedbackAsin&&c.adId&&c.campaignId&&c.advertiserId&&c.marketplaceId&&c.isLocationUsed&&c.isInterestBasedAdsOptOut&&lc(c,b,a)})},lc=function(a,b,c){var d="mobile"===b?Sa(a.adFeedbackLabelId,Ta(a,"mobile")):Sa(a.adFeedbackLabelId,Ta(a,"desktop"));c(function(){return d})},Ta=function(a,b){var c=b=n.__assign,d=a.adFeedbackAsin,e=a.adId,f=a.campaignId,g=a.title;var h=a.price;
var k=a.currencyCode;h=h&&k?{amount:h,currencyCode:k}:void 0;k=a.advertiserId;var p=a.marketplaceId;c=c.call(n,{},{asin:d,adCreativeIndex:0,adId:e,campaignId:f,title:g,priceInfo:h,advertiserIdNS:k&&p?"axiom."+p+"."+k:void 0});d=a.isLocationUsed;a=a.isInterestBasedAdsOptOut;a=void 0===d||void 0===a?void 0:{version:1,context:!0,location:"true"===d,pastActivity:"true"===a?0:1};return{adCreativeDetails:[b.call(n,c,{selectionSignals:a})]}},Sa=function(a,b){return{adFeedbackLabelId:a,adCreativeMetaData:b}},
nc={initCarousel:function(a){return n.__awaiter(void 0,void 0,void 0,function(){var b,c,d;return n.__generator(this,function(e){b=(a||{}).afterPageLoaded;c=w["default"].cardRoot.classList.contains("p13n-sc-shoveler")?[w["default"].cardRoot]:Array.prototype.slice.call(w["default"].cardRoot.getElementsByClassName("p13n-sc-shoveler"));d=T["default"].setup(["getCarouselItems"]);if(null===c||void 0===c||!c.length)return[2];c.forEach(function(f){return n.__awaiter(void 0,void 0,void 0,function(){var g,
h,k,p,l,r;return n.__generator(this,function(q){switch(q.label){case 0:g=f.dataset||{};h="true"===g.showlazyloaddeliverymessage;k=function(){v["default"].loadDynamicImage("[data-name]='"+r+"' .p13n-sc-dynamic-image");Cb(f);Ab(f);null===b||void 0===b?void 0:b(f);var m=window.P;ob(m);pb(m);Db(f);h&&zb(f)};k();if(f.classList.contains("p13n-carousel-initialized"))return[2];f.classList.add("p13n-carousel-initialized");p=Ba["default"].getCarousel(xa.unscope(f));l=lb["default"].getCarousel(f);r=p.getAttr("name");
return[4,Promise.all([l.initialized,wb.setupModal(f)])];case 1:return q.sent(),v["default"].on("a:carousel:"+r+":change:pageSize",k),v["default"].on("a:carousel:"+r+":change:loading",k),v["default"].on("a:carousel:"+r+":change:animating",k),v["default"].on("a:carousel:"+r+":change:fetchedItems",k),l.attachRemoteOperation(function(m){var t=m.indexes;m=m.ids;var u=d,x=u.getCarouselItems,y=n.__assign,F=n.__assign({},g),R=String(t[0]||0);var N=t[0]||0,G,O,A=0,L=g.aCarouselOptions?g.aCarouselOptions:void 0;
if(L&&(L=JSON.parse(L),L=null===(G=null===L||void 0===L?void 0:L.ajax)||void 0===G?void 0:G.id_list))for(G=0;G<N&&G<L.length;G++){var M=JSON.parse(L[G]);"true"===((null===(O=null===M||void 0===M?void 0:M.metadataMap)||void 0===O?0:O.isSponsoredProduct)?M.metadataMap.isSponsoredProduct:"false")&&(A+=1)}return x.call(u,y.call(n,F,{ids:m,indexes:t,offset:R,adOffset:A}))}),[2]}})})});return[2]})})}},oc={updateHandler:function(a){var b;void 0===a&&(a=w["default"].cardRoot);a=Array.prototype.slice.call(a.querySelectorAll('[class*="dealsCardDealTimer"]:not([data-callback-attached])'));
try{for(var c=n.__values(a),d=c.next();!d.done;d=c.next())cc(d.value)}catch(f){var e={error:f}}finally{try{d&&!d.done&&(b=c.return)&&b.call(c)}finally{if(e)throw e.error;}}}},pc={initializeInPageBadgeAtcOperations:Qa,initializeQuantityStepperAtcFlavoredOperations:function(a,b,c,d){var e=Array.prototype.slice.call(a.querySelectorAll(".p13n-sc-uncoverable-faceout"));ea.define(W.removeItemFromCart,["click"],Pa.bind(null,-1));ea.define(W.addItemToCart,["click"],Pa.bind(null,1));e.forEach(function(f){var g=
f.id;f=f.querySelector(".p13n-sc-atc-container");if(H(f)){Yb(f,g);g=null===f||void 0===f?void 0:f.querySelector(".atc-stepper-trash-button");var h=null===f||void 0===f?void 0:f.querySelector(".atc-stepper-remove-button");f=null===f||void 0===f?void 0:f.querySelector(".atc-stepper-add-button");H(g)&&ea.attach(W.removeItemFromCart,g);H(h)&&ea.attach(W.removeItemFromCart,h);H(f)&&ea.attach(W.addItemToCart,f)}});return Qa(a,b,function(f,g,h){var k;if(h.success&&(null===(k=null===h||void 0===h?void 0:
h.items)||void 0===k?0:k.length)){k=h.items[0];var p;if(p=k.id){var l=a.querySelector("#atc-stepper-section-"+f);H(l)?(l.dataset.modifyId=p,p=!0):p=!1}else p=!1;p&&h.count&&void 0!==k.quantity?Na(f,k.quantity,h.count,!1):(ha(g,f,h),d&&d(f,g,h));c&&(pa(g,f),c(f,g,h))}else ha(g,f,h),d&&d(f,g,h)},function(f,g,h){ha(g,f,h);d&&d(f,g,h)})},setupSponsoredProductATCListeners:function(a){a.querySelectorAll(".p13n-sc-atc-container").forEach(function(b){if("true"===b.dataset.hasSponsoredUrl){var c=b.dataset.sponsoredAtcUrl;
if(c){var d=b.querySelector("form.add-to-cart-data");d&&d.querySelector('input[type="submit"][name="submit.addToCart"]')&&(b.onclick=function(e){e.preventDefault();ac(c);d.submit()})}}})}},qc={enableDesktopUnifiedAdLabels:function(){mc(sa,"desktop")}},rc={enableAdFeedback:function(a){var b=w["default"].cardRoot.querySelector("[data-sponsoredhybridwidgetcontext]");b&&(b=b.getAttribute("data-sponsoredhybridwidgetcontext"))&&a(b).catch(function(c){return B["default"].log("enableAdFeedbackDelegate: Error occurred: "+
(c instanceof Error?c.message:JSON.stringify(c)))})}},sc={initializeQuantitySelectorWidgets:function(){v["default"].trigger("quantity-selector-widget:loadStatesAndInitialize")}},K=function(a,b){a&&(b?D["default"].show(a):D["default"].hide(a))},ta=function(a,b){return(a=b.getElementsByClassName(a))&&1===a.length?a[0]:void 0},X=function(a,b){void 0===b&&(b=1);z.count(a,(z.count(a)||0)+b)},tc=function(){function a(b,c,d,e,f,g,h,k){var p=this;this.throttledScrollAction=v["default"].throttle(function(){return n.__awaiter(p,
void 0,void 0,function(){return n.__generator(this,function(l){switch(l.label){case 0:return[4,this.getNextBatchIfBottomInView()];case 1:return l.sent(),[2]}})})},200);this.containerDataset=this.getContainerDataset(b);this.bottomOfListElement=c;this.containerForInsertion=d;this.insertFetchedItems=e;this.errorFetchingItemsElement=g;this.fetchAsinsRemoteOperation=f;this.spinnerFetchingItemsElement=h;this.batchSize=k||8;this.processingStatus={batchFailureCount:0,currentIndex:Number(b.dataset.indexOffset)||
0,individualBatchAttemptsCount:0,isAllContentLoaded:!1,isProcessing:!1}}a.prototype.getContainerDataset=function(b){if(!b.dataset||!b.dataset.asinList)throw Error("Dataset not present or does not contain required data!");return{asinList:JSON.parse(b.dataset.asinList),linkParameters:b.dataset.linkParameters||"{}",reftag:b.dataset.reftag||"",strategyId:b.dataset.strategyId||"",widgetGroupId:b.dataset.widgetGroupId||""}};a.prototype.getNextItemBatch=function(b){var c=this;this.processingStatus.individualBatchAttemptsCount+=
1;this.processingStatus.isProcessing=!0;var d=this.processingStatus.currentIndex;if(d>=this.containerDataset.asinList.length)return this.processingStatus.isAllContentLoaded=!0,Promise.resolve(void 0);K(this.spinnerFetchingItemsElement,!0);d=this.containerDataset.asinList.slice(d,d+this.batchSize);var e=d.map(function(f,g){return g+c.processingStatus.currentIndex});return this.fetchAsinsRemoteOperation({ids:d,indexes:e,linkparameters:this.containerDataset.linkParameters,offset:e[0].toString(),reftagprefix:this.containerDataset.reftag}).then(function(f){K(c.spinnerFetchingItemsElement,
!1);c.insertFetchedItems(b,f);c.processingStatus.batchFailureCount=0;c.processingStatus.currentIndex+=c.batchSize;c.processingStatus.individualBatchAttemptsCount=0;c.processingStatus.isProcessing=!1}).catch(function(f){console.log("Error fetching items: "+f);if(2<=c.processingStatus.individualBatchAttemptsCount){c.processingStatus.batchFailureCount+=1;if(2<=c.processingStatus.batchFailureCount){c.processingStatus.isProcessing=!0;K(c.spinnerFetchingItemsElement,!1);K(c.errorFetchingItemsElement,!0);
return}c.processingStatus.currentIndex+=c.batchSize}void c.getNextItemBatch(b)})};a.prototype.getNextBatchIfBottomInView=function(){return n.__awaiter(this,void 0,void 0,function(){return n.__generator(this,function(b){switch(b.label){case 0:if(this.processingStatus.isProcessing)return[3,3];this.processingStatus.isProcessing=!0;return D["default"].onScreen(this.bottomOfListElement,500)&&!this.processingStatus.isAllContentLoaded&&2>this.processingStatus.batchFailureCount?[4,this.getNextItemBatch(this.containerForInsertion)]:
[3,2];case 1:return b.sent(),[3,3];case 2:this.processingStatus.isProcessing=!1,b.label=3;case 3:return[2]}})})};a.prototype.isInErrorState=function(){return 2<=this.processingStatus.batchFailureCount};a.prototype.resetLazyLoading=function(){this.processingStatus.batchFailureCount=0;K(this.errorFetchingItemsElement,!1)};return a}(),Ua=function(a,b,c){void 0===b&&(b=function(){});void 0===c&&(c=function(){});return n.__awaiter(void 0,void 0,void 0,function(){return n.__generator(this,function(d){switch(d.label){case 0:return a.dataset.event?
[4,uc(a.dataset.event,a,b,c)]:[3,2];case 1:return d.sent(),[3,5];case 2:return a.dataset.url?[4,vc(a.dataset.url,b,c)]:[3,4];case 3:return d.sent(),[3,5];case 4:B["default"].log("Element is missing dataset.url or dataset.event attribute"),c(),d.label=5;case 5:return[2]}})})},uc=function(a,b,c,d){return n.__awaiter(void 0,void 0,void 0,function(){var e,f,g,h,k,p;return n.__generator(this,function(l){switch(l.label){case 0:e=function(r){return n.__awaiter(void 0,void 0,void 0,function(){var q,m;return n.__generator(this,
function(t){switch(t.label){case 0:return q=function(u){u?c():(B["default"].log("Failed to call PPDS custom API"),d())},m=function(u){B["default"].log("Caught error when calling PPDS custom API: "+u.stack);d()},[4,r().then(q).catch(m)];case 1:return t.sent(),[2]}})})};f=function(r){return n.__awaiter(void 0,void 0,void 0,function(){var q;return n.__generator(this,function(m){switch(m.label){case 0:if(!b.dataset.asin)return[3,2];q={asin:b.dataset.asin};return[4,e(r.bind(null,q))];case 1:return m.sent(),
[3,3];case 2:B["default"].log("Element was missing required data: asin"),d(),m.label=3;case 3:return[2]}})})};g=a;switch(g){case "NOT_INTERESTED":return[3,1];case "DELETE_NOT_INTERESTED":return[3,5]}return[3,7];case 1:if(!b.dataset.asin)return[3,3];h={asin:b.dataset.asin,expirationTime:wc(b.dataset.suppressiondays),reason:b.dataset.reason,strategyId:b.dataset.strategyId||b.dataset.strategyid,widgetGroupId:b.dataset.widgetGroupId||b.dataset.widgetgroupid};k=T["default"].setup(["recordNotInterested"]);
return[4,e(k.recordNotInterested.bind(null,h))];case 2:return l.sent(),[3,4];case 3:B["default"].log("Element was missing required data: asin"),d(),l.label=4;case 4:return[3,8];case 5:return p=T["default"].setup(["deleteNotInterested"]),[4,f(p.deleteNotInterested)];case 6:return l.sent(),[3,8];case 7:return B["default"].log("Invalid PPDS event type: "+a),d(),[3,8];case 8:return[2]}})})},vc=function(a,b,c){return n.__awaiter(void 0,void 0,void 0,function(){return n.__generator(this,function(d){switch(d.label){case 0:return[4,
Z["default"].post(a,{accepts:"text/html,*/*",contentType:"application/x-www-form-urlencoded"}).then(function(){b()}).catch(function(e){B["default"].log("Failed to call AJAX endpoint "+a+" with error: "+e.message,"ERROR");c()})];case 1:return d.sent(),[2]}})})},wc=function(a){if(a&&(a=Number.parseInt(a,10),!(0>=a||(a=new Date(Date.now()+864E5*a),Number.isNaN(a.getTime())))))return a.toISOString()},xc=function(a,b,c,d,e,f,g,h,k,p){var l=a.getElementsByClassName(d)[0],r=a.getElementsByClassName(e)[0],
q=h?a.getElementsByClassName(h)[0]:void 0,m=a.querySelector(f);if(!r||!l||!m)throw Error("One or more elements to record feedback are not present.");d=function(t,u){t&&(t.onclick=function(){return n.__awaiter(void 0,void 0,void 0,function(){var x;return n.__generator(this,function(y){switch(y.label){case 0:return[4,Ua(t,function(){u&&k?k():!u&&p&&p();K(m,!1);K(r,u);K(l,!u);q&&(q.style.opacity=u?"0.3":"1");g&&X(g.prefix+":record-feedback:success")},function(){console.log("Failed to record feedback on click");
K(m,!0);g&&X(g.prefix+":record-feedback:failure")})];case 1:return y.sent(),g&&(x=u?g.primaryAction:g.secondaryAction,X(g.prefix+":record-feedback:"+x)),[2]}})})})};b=ta(b,a);d(b,!0);a=ta(c,a);d(a,!1)},yc=function(a,b,c,d,e){var f=function(p){return T["default"].setup(["getCanariesFeedbackReasons"]).getCanariesFeedbackReasons(p)},g=d.getElementsByClassName("p13n-not-interested-reasons")[0],h=ta("p13n-not-interested-success-message",d),k=d.querySelector("#p13n-record-feedback-error-message");return function(){e.includes(a)||
e.push(a);g?(K(h,!1),g.hasChildNodes()||f({asin:a,strategyId:b,widgetGroupId:c}).then(function(p){Array.prototype.slice.call(p.getElementsByClassName("p13n-feedback-reasons-option")).forEach(function(l){function r(){return n.__awaiter(this,void 0,void 0,function(){return n.__generator(this,function(m){Ua(l,function(){K(k,!1);K(g,!1);K(h,!0)},function(){console.log("Failed to record feedback reason on click");k&&K(k,!0)});return[2]})})}var q=l.getElementsByTagName("input")[0];q.addEventListener("keypress",
function(m){return n.__awaiter(void 0,void 0,void 0,function(){return n.__generator(this,function(t){"Enter"===m.key&&r();return[2]})})});q.addEventListener("click",function(m){return n.__awaiter(void 0,void 0,void 0,function(){return n.__generator(this,function(t){0!==m.screenX&&0!==m.screenY&&r();return[2]})})})});g.appendChild(p)}),K(g,!0)):K(h,!0)}},zc=function(a,b){return function(){var c=b.indexOf(a);-1<c&&b.splice(c,1)}},Ac={feedbackModalInit:function(a,b){var c={prefix:"p13n-desktop-feedback-modal",
primaryAction:"not-interested",secondaryAction:"remove-not-interested"},d=[],e=w["default"].cardRoot.querySelector(".p13n-desktop-canaries-kebab-data");if(e){X(c.prefix+":kebab:render");e.onclick=function(){return X(c.prefix+":kebab:click")};w["default"].cardRoot.querySelector(".p13n-desktop-feedback-modal-link").onclick=function(){return X(c.prefix+":modal:open")};var f=w["default"].cardRoot.querySelector(".p13n-ni-iyr-redirect");f&&(f.onclick=function(){return X(c.prefix+":iyr:click")});f=w["default"].cardRoot.getElementsByClassName("p13n-canaries-desktop-feedback-modal")[0];
if(!f)throw Error("Dataset not present or does not contain required data!");var g=f.querySelector("#endOfList"),h=w["default"].cardRoot.getElementsByClassName("p13n-desktop-feedback-modal-faceouts-list")[0],k=f.querySelector("#p13n-desktop-feedback-modal-loading-items"),p=f.querySelector("#p13n-desktop-feedback-modal-error-loading-items"),l=new tc(e,g,h,function(t,u){var x;if(u.hasChildNodes()){u=Array.from(u.childNodes);try{for(var y=n.__values(u),F=y.next();!F.done;F=y.next()){var R=F.value;u=R;
var N=u.getElementsByClassName("p13n-individual-feedbackButton")[0];xc(u,"p13n-individual-feedbackButton","p13n-feedback-undo-button","p13n-desktop-feedback-modal-initial-faceout","p13n-desktop-feedback-modal-undo-faceout","#p13n-record-feedback-error-message",c,"p13n-feedback-list-asin-image",yc(N.dataset.asin||"",e.dataset.strategyId||"",e.dataset.widgetGroupId||"",u,d),zc(N.dataset.asin||"",d));t.appendChild(R);N.dataset.strategyId=e.dataset.strategyId;N.dataset.widgetGroupId=e.dataset.widgetGroupId}}catch(O){var G=
{error:O}}finally{try{F&&!F.done&&(x=y.return)&&x.call(y)}finally{if(G)throw G.error;}}}},function(t){return T["default"].setup(["getCanariesFeedbackModalItems"]).getCanariesFeedbackModalItems(t)},p,k);w["default"].cardRoot.querySelector(".p13n-desktop-feedback-modal-link").addEventListener("click",function(){return n.__awaiter(void 0,void 0,void 0,function(){return n.__generator(this,function(t){switch(t.label){case 0:return""!==h.innerHTML||l.isInErrorState()?[3,2]:[4,l.getNextItemBatch(h)];case 1:return t.sent(),
[3,4];case 2:if(!l.isInErrorState())return[3,4];l.resetLazyLoading();return[4,l.getNextItemBatch(h)];case 3:t.sent(),t.label=4;case 4:return[2]}})})});f.addEventListener("wheel",l.throttledScrollAction);var r=function(t){return T["default"].setup(["refreshCard"]).refreshCard(t)};f=e.dataset.uniqueId;g=e.dataset.input;!g&&(k=w["default"].cardRoot.querySelector(".p13n-desktop-canaries-wrapper-data"),null===k||void 0===k?0:k.dataset)&&(g=k.dataset.input);var q=JSON.parse(g||"{}"),m=w["default"].cardRoot.querySelector("#p13n-desktop-feedback-modal-close-message");
v["default"].on("a:popover:hide:p13n-desktop-feedback-modal_"+f,function(){return n.__awaiter(void 0,void 0,void 0,function(){var t,u,x,y,F,R,N,G,O,A;return n.__generator(this,function(L){t=e.querySelector(".p13n-feedback-popover-kebab-button");t.focus();if(0<d.length&&q&&q.content){u=q.content.recommendations;x=[];try{for(y=n.__values(u),F=y.next();!F.done;F=y.next())R=F.value,N=R.id,G=d.indexOf(N),0>G&&x.push(R)}catch(M){O={error:M}}finally{try{F&&!F.done&&(A=y.return)&&A.call(y)}finally{if(O)throw O.error;
}}x.length<b?m?(m.style.display="inline",m.style.position="absolute",m.style.top=(w["default"].cardRoot.offsetHeight-m.offsetHeight)/2+"px",m.style.right=(w["default"].cardRoot.offsetWidth-m.offsetWidth)/2+"px"):B["default"].log("Could not find the changeover element for message surfacing"):(q.content.recommendations=x,r(q).then(function(M){w["default"].cardRoot.innerHTML=M.outerHTML;a()}).catch(function(M){B["default"].log("Error fetching items: "+M)}))}return[2]})})})}}},Va=document.body.style.overflow,
V=function(a){return a.find("#cpf-sidesheet-content-container")},Bc=function(a){var b,c;null!==(b=a.$target)&&void 0!==b&&b.length&&(null===(c=a.$target)||void 0===c?0:c.hasClass("cpf-sidesheet-anchor-end"))&&v["default"].delay(function(){Y().find("a[href], button").first().focus()},0)},Cc=function(a){var b;null!==(b=a.$target)&&void 0!==b&&b.length&&v["default"].delay(function(){v["default"].$(document.activeElement).hasClass("cpf-sidesheet-anchor-start")&&Y().find("a[href], button").last().focus()},
0)},Wa=function(){document.body.style.overflow=Va?Va:"";E["default"]("#cpf-sidesheet-background").hide();var a=Y();a.attr("aria-hidden","true");E["default"]("#cpf-sidesheet").attr("aria-hidden","true");V(a).attr("aria-hidden","true");E["default"]("#a-page").attr("aria-hidden","false");fa(a).hide();Dc()},Y=function(){return E["default"]("#cpf-sidesheet-containerempty-div")},fa=function(a){return a.find("#cpf-sidesheet-secondary-content-container")},Dc=function(){var a=E["default"]("#cpf-sidesheet").width()+
50;Ec({right:"-"+a+"px"},function(){E["default"]("#cpf-sidesheet").hide()})},Fc=function(){E["default"]("#cpf-sidesheet").show(function(){v["default"].animate(E["default"]("#cpf-sidesheet"),{right:"0"},300,"ease-out",function(){E["default"]("#cpf-sidesheet-close").show()})})},Ec=function(a,b){v["default"].animate(E["default"]("#cpf-sidesheet"),a,300,"ease-out",b)},Gc=function(a){a=da["default"].setup().define;a("cpf-side-sheet-open","click",function(b){var c;b=null===(c=b.currentTarget)||void 0===
c?void 0:c.getAttribute("cpf-side-sheet-content-id");var d=Y();c=E["default"]("#"+b);d&&0!==d.length||(b=E["default"](document.createElement("div")),b.attr("id","cpf-sidesheet-containerempty-div"),d=w["default"].cardRoot.getElementsByClassName("cpf-sidesheet-container")[0].innerHTML,b.append(d),E["default"]("body").prepend(b),d=b);c&&0!==c.length&&(V(d).html(c.html()),c=Y(),V(c).show(),c.attr("aria-hidden","false"),E["default"]("#cpf-sidesheet").attr("aria-hidden","false"),V(c).attr("aria-hidden",
"false"),E["default"]("#a-page").attr("aria-hidden","true"),E["default"]("body").css("overflow","hidden"),E["default"]("#cpf-sidesheet-background").show(),Fc(),c.find(".cpf-sidesheet-close-button").focus())});v["default"].declarative("cpf-side-sheet-close","click",function(b){Wa()});v["default"].declarative("cpf-side-sheet-secondary-open","click",function(b){var c,d=Y();b=null===(c=b.data)||void 0===c?void 0:c.preloadDomId;c=E["default"]("#"+b);d.find(".cpf-sidesheet-close-button").focus();V(d).hide();
V(d).attr("aria-hidden",!0);fa(d).show().html(c.html());fa(d).attr("aria-hidden",!1)});v["default"].declarative("cpf-bottom-sheet-secondary-back","click",function(b){b=Y();b.find(".cpf-sidesheet-close-button").focus();V(b).show();V(b).attr("aria-hidden",!1);fa(b).hide();fa(b).attr("aria-hidden",!0)});v["default"].declarative("cpf-sidesheet-capture","keydown",function(b){"keydown"!==b.type||27!==b.$event.keyCode&&27!==b.$event.key||Wa()});v["default"].declarative("cpf-sidesheet-capture","focusin",
function(b){Bc(b)});v["default"].declarative("cpf-sidesheet-capture","focusout",function(b){Cc(b)})},Ic=function(a){return n.__awaiter(void 0,void 0,void 0,function(){var b,c,d,e,f,g,h,k,p,l,r,q,m;return n.__generator(this,function(t){switch(t.label){case 0:b=null!==(l=a.widgetLabelClass)&&void 0!==l?l:"hybrid-widget-sponsored-label";c=null!==(r=a.productLabelClass)&&void 0!==r?r:"hybrid-sponsored-label";d=JSON.parse(a.sponsoredHybridWidgetContextJson);e=null!==(q=d.painterId)&&void 0!==q?q:"unknown";
f=null!==(m=d.slotId)&&void 0!==m?m:"unknown";aa["default"].count("".concat(e,".").concat(f,".initAdFeedback"),1);if(g=Hc(b,c,a.enableWidgetAdFeedback,e,f))return[2,g];h=0;k=Xa(c);p=k.map(function(u){u=ua(u);if(u.adFeedbackLabelId&&u.adFeedbackAsin&&u.adId&&u.campaignId&&u.advertiserId&&u.marketplaceId&&u.isLocationUsed&&u.isInterestBasedAdsOptOut)return a.enableProductAdFeedback(u);h++;return Promise.resolve()});aa["default"].count("".concat(e,".").concat(f,".productAdFeedback"),k.length);aa["default"].count("".concat(e,
".").concat(f,".invalidProductAdFeedbackPayload"),h);return[4,Promise.all(p)];case 1:return t.sent(),[2]}})})},Hc=function(a,b,c,d,e){void 0===a&&(a="hybrid-widget-sponsored-label");void 0===b&&(b="hybrid-sponsored-label");a=Xa(a);aa["default"].count("".concat(d,".").concat(e,".widgetAdFeedbackLabel"),a.length);if(1<a.length)throw Error("More than one ad feedback label found for widget");if(1===a.length){a=ua(a[0]);if(!a.adFeedbackLabelId)throw aa["default"].count("".concat(d,".").concat(e,".missingWidgetAdFeedbackLabel"),
1),Error("Missing required attribute adFeedbackLabelId");b=S["default"].cardRoot.querySelectorAll("[class*='".concat(b,"']"));var f=[];b.forEach(function(g){g=ua(g);f.push(g)});aa["default"].count("".concat(d,".").concat(e,".widgetAdFeedback"),b.length);return c(a.adFeedbackLabelId,f)}},ua=function(a){return{adFeedbackLabelId:a.dataset.adFeedbackLabelId||"",adFeedbackAsin:a.dataset.adFeedbackAsin||"",adId:a.dataset.adId||"",campaignId:a.dataset.campaignId||"",advertiserId:a.dataset.advertiserId||
"",marketplaceId:a.dataset.marketplaceId||"",isLocationUsed:a.dataset.locationUsed||"",isInterestBasedAdsOptOut:a.dataset.interestBasedAdsOptOut||"",title:a.dataset.asinTitle||"",price:a.dataset.asinPrice||"",currencyCode:a.dataset.currencyCode||"",adProgram:a.dataset.adProgram||"",adCreativeId:a.dataset.adCreativeId||"",adNetwork:a.dataset.adNetwork||"",advertiserIdNS:a.dataset.advertiserIdNs||"",campaignIdNS:a.dataset.campaignIdNs||"",selectionSignals:a.dataset.selectionSignals||""}},Xa=function(a){a=
S["default"].cardRoot.getElementsByClassName(a);return Array.prototype.slice.call(a)},Ya=function(a,b){if(a&&b)return{amount:a,currencyCode:b}},Za=function(a){if("1024"===(a.adProgram||"1024")){var b=n.__assign,c=n.__assign,d=a.adFeedbackAsin,e=a.adId,f=a.campaignId,g=a.title,h=Ya(a.price,a.currencyCode);var k=a.advertiserId,p=a.marketplaceId;c=c.call(n,{},{asin:d,adCreativeIndex:0,adId:e,campaignId:f,title:g,priceInfo:h,advertiserIdNS:k&&p?"axiom."+p+"."+k:void 0});d=a.isLocationUsed;e=a.isInterestBasedAdsOptOut;
var l;a=void 0===d||void 0===e?void 0:(l={version:1,context:!0},l.location="true"===d,l.pastActivity="true"===e?0:1,l);return b.call(n,c,{selectionSignals:a})}return{asin:a.adFeedbackAsin,adCreativeIndex:0,adId:a.adId,campaignId:a.campaignId,adCreativeId:a.adCreativeId,adNetwork:a.adNetwork,title:a.title,priceInfo:Ya(a.price,a.currencyCode),advertiserIdNS:a.advertiserIdNS,campaignIdNS:a.campaignIdNS,selectionSignals:JSON.parse(a.selectionSignals||"{}")}},Lc=function(a){return n.__awaiter(void 0,void 0,
void 0,function(){return n.__generator(this,function(b){return[2,Ic({widgetLabelClass:"hybrid-widget-sponsored-label",enableWidgetAdFeedback:Jc,productLabelClass:"hybrid-sponsored-label",enableProductAdFeedback:Kc,sponsoredHybridWidgetContextJson:a})]})})},Jc=function(a,b){b=b.map(Za);var c={adFeedbackLabelId:a,adCreativeMetaData:{adCreativeDetails:b}};return sa(function(){return c})},Kc=function(a){var b=[Za(a)],c={adFeedbackLabelId:a.adFeedbackLabelId,adCreativeMetaData:{adCreativeDetails:b}};return sa(function(){return c})},
$a=function(){return n.__awaiter(void 0,void 0,void 0,function(){var a,b;return n.__generator(this,function(c){switch(c.label){case 0:return a=nc.initCarousel({afterPageLoaded:function(d){oc.updateHandler(d);sc.initializeQuantitySelectorWidgets();"true"===wa.cardRoot().dataset.useSponsoredAdsCardsLibrary?(rc.enableAdFeedback(Lc),pc.setupSponsoredProductATCListeners(w["default"].cardRoot)):qc.enableDesktopUnifiedAdLabels()}}),b=Ac.feedbackModalInit($a,1),Gc(),[4,a];case 1:return c.sent(),[4,b];case 2:return c.sent(),
[2]}})})};va._operationNames=["getCarouselItems","getCanariesFeedbackModalItems","refreshCard","deleteNotInterested","recordNotInterested"];va.card=$a});
